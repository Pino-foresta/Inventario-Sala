<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestione Magazzino</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div id="login-container">
        <h2>Accesso Magazzino</h2>
        <input type="password" id="password" placeholder="Inserisci la password">
        <button id="login-button">Accedi</button>
    </div>
    
    <div id="app" style="display:none;">
        <h1>Gestione Magazzino</h1>
        
		<button id="show-inventory-btn" onclick="showInventory()">Visualizza Deposito</button>
		<button id="show-log-btn" onclick="showLog()">Visualizza Registro Attività</button>
<div id="admin-section">
    <h2>Area Admin</h2>
</div>
        
        <h2>Aggiungi Prodotto Manualmente</h2>
        <div id="manual-add-section">
            <input type="text" id="manual-name" placeholder="Nome prodotto">
            <input type="text" id="manual-description" placeholder="Descrizione">
            <input type="number" id="manual-quantity" placeholder="Quantità">
            <button id="generate-barcode-btn" onclick="generateBarcode()">Genera Codice</button>
			<button id="add-product-btn" onclick="addManualProduct()">Salva Prodotto</button>

        </div>
        
        <h2>Codice a Barre Generato</h2>
        <div id="barcode-container">
            <div id="barcode"></div>
        </div>
        
        <h2>Scannerizza Codice</h2>
        <video id="scanner-video" style="width:100%; max-width:400px; display:none;"></video>
        <button id="scanner-btn" onclick="startScanner()" style="display:none;">Avvia Scanner</button>

        
        <h2>Lista Prodotti</h2>
        <div id="product-list"></div>
        
        <h2>Registro Movimenti</h2>
        <div id="log"></div>
    </div>
<script type="module">
  // Importa Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
  import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

  // CONFIGURAZIONE FIREBASE (sostituisci con i tuoi dati)
  const firebaseConfig = {
    apiKey: "TUA_API_KEY",
    authDomain: "TUO_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://TUO_PROJECT_ID.firebaseio.com",
    projectId: "TUO_PROJECT_ID",
    storageBucket: "TUO_PROJECT_ID.appspot.com",
    messagingSenderId: "TUO_SENDER_ID",
    appId: "TUO_APP_ID"
  };

  // Inizializza Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Funzione per salvare dati nel database
  function salvaDati() {
    set(ref(db, 'inventario/prodotto1'), {
      nome: "Laptop",
      prezzo: 1000
    }).then(() => {
      alert("Dati salvati!");
    }).catch((error) => {
      alert("Errore: " + error);
    });
  }

  // Funzione per leggere dati dal database
  function leggiDati() {
    get(ref(db, 'inventario/prodotto1')).then((snapshot) => {
      if (snapshot.exists()) {
        console.log(snapshot.val());
      } else {
        console.log("Nessun dato trovato");
      }
    }).catch((error) => {
      console.error("Errore: ", error);
    });
  }
</script>

<!-- Bottone per testare il salvataggio dati -->
<button onclick="salvaDati()">Salva Dati</button>
<button onclick="leggiDati()">Leggi Dati</button>

</body>
</html>
